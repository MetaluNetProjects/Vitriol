#N canvas 1 81 1024 685 10;
#N canvas 65 82 450 300 (subpatch) 0;
#X array \$0_delta_t 3 float 3;
#A 0 433.456 122.5 79.3995;
#X coords 0 300 3 299 200 140 0;
#X restore 32 434 graph;
#N canvas 0 50 450 300 (subpatch) 0;
#X array \$0_delta_i 3 float 3;
#A 0 0 0.00858218 0.0153583;
#X coords 0 300 3 299 200 140 0;
#X restore 274 441 graph;
#X obj 16 279 tabread config_hp;
#X obj 267 -223 loadbang;
#X obj 16 254 t f f f;
#X obj 16 327 t f f;
#X obj 16 408 tabwrite \$0_delta_t;
#X obj 214 409 tabwrite \$0_delta_i;
#X obj 191 273 send \$0_mouvement;
#X obj 75 106 send~ source_\$0;
#X obj 154 -168 inlet;
#X obj 75 -52 SFO_volume;
#N canvas 253 78 450 300 distance 0;
#X obj 48 53 inlet;
#X obj 132 54 inlet;
#X obj 230 54 inlet;
#X obj 48 85 -;
#X obj 230 103 *;
#X obj 137 177 +;
#X obj 137 202 sqrt;
#X obj 137 231 outlet;
#X obj 230 78 t f f;
#X obj 48 108 t f f;
#X obj 48 131 *;
#X connect 0 0 3 0;
#X connect 1 0 3 1;
#X connect 2 0 8 0;
#X connect 3 0 9 0;
#X connect 4 0 5 1;
#X connect 5 0 6 0;
#X connect 6 0 7 0;
#X connect 8 0 4 0;
#X connect 8 1 4 1;
#X connect 9 0 10 0;
#X connect 9 1 10 1;
#X connect 10 0 5 0;
#X restore 16 304 pd distance;
#N canvas 0 50 1024 685 miditocmy 0;
#X obj 200 99 inlet;
#X obj 200 247 *;
#X obj 200 303 outlet;
#X obj 200 274 + 40;
#X obj 285 99 r amplitude;
#X obj 200 164 + 1;
#X obj 200 198 / 2;
#X text 27 159 pour se rammener à une ordonnée positive;
#X text 240 257 pour prévenir la division par zéro qui arrive si
on est collé au banc;
#X connect 0 0 5 0;
#X connect 1 0 3 0;
#X connect 3 0 2 0;
#X connect 4 0 1 1;
#X connect 5 0 6 0;
#X connect 6 0 1 0;
#X restore 262 132 pd miditocmy;
#X obj 156 78 hsl 128 15 -1 1 0 0 empty empty empty -2 -8 0 10 -262144
-1 -1 6350 1;
#X obj 262 -55 vsl 15 128 -1 1 0 0 empty empty empty 0 -9 0 10 -262144
-1 -1 1270 1;
#X msg 654 149 obj 0 \$1 SFO_process \$2 \$3;
#X obj 654 122 pack f f f, f 21;
#X obj 654 34 t f f;
#X obj 654 58 * 30;
#X obj 726 98 f \$0;
#X msg 765 5 resize \$1;
#X obj 765 38 send \$0_delta_t;
#X obj 777 64 send \$0_delta_i;
#X obj 765 -20 + 1;
#X msg 859 149 clear;
#X obj 90 210 r nbr_hp;
#X obj 654 -65 t b b;
#X obj 654 -29 delay 200;
#X obj 738 -58 t f f;
#X obj 478 414 f;
#X obj 478 439 send \$0_gain_source;
#X obj 152 157 t b b b f b;
#X obj 325 375 t f f;
#X obj 654 180 send pd-\$0_proc;
#N canvas 0 50 1024 685 \$0_proc 0;
#X obj 0 30 SFO_process 1024 1;
#X obj 0 60 SFO_process 1024 2;
#X restore 654 205 pd \$0_proc;
#X obj 153 -105 unpack f f f f;
#X obj 299 -74 receive \$1_OSC_x;
#X obj 298 -102 receive \$1_OSC_y;
#X obj 267 -192 t b b;
#X obj 535 -80 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 738 -79 r nbr_hp;
#N canvas 245 57 610 502 moyenne 0;
#X obj 98 114 inlet;
#X obj 174 115 inlet;
#X obj 98 229 +;
#X obj 98 361 outlet;
#X obj 385 114 receive nbr_hp;
#X obj 98 267 /;
#X msg 174 139 0;
#X obj 150 206 t f;
#X text 210 142 remet à zéro;
#X obj 98 194 f 0;
#X connect 0 0 9 0;
#X connect 1 0 6 0;
#X connect 2 0 5 0;
#X connect 2 0 7 0;
#X connect 4 0 5 1;
#X connect 5 0 3 0;
#X connect 6 0 2 1;
#X connect 7 0 2 1;
#X connect 9 0 2 0;
#X restore 496 392 pd moyenne;
#X text 190 294 bang dès qu'il y a un mouvement;
#X floatatom 854 115 5 0 0 0 - - -;
#X text 894 113 \$0;
#X text 200 -166 liste de controle en entree : x \, y \, Volume \,
On;
#X obj 16 359 -;
#X obj 262 155 t b b b f f f b;
#X text 43 358 pour avoir des retards minimums;
#N canvas 445 59 510 472 osctocmx 0;
#X obj 130 103 inlet;
#X obj 130 219 *;
#X obj 130 247 outlet;
#X obj 209 103 r amplitude;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 3 0 1 1;
#X restore 152 130 pd osctocmx;
#X msg 153 -130 0 -0.8 0 1;
#X obj 16 232 remplir 1 8;
#X obj 654 6 remplir 1 8;
#X text 597 -135 Cette séquence construit dans le sous-patch "\$0-proc"
le nombre d'abstraction "process" correspondant au nombre de hp. Il
redimensionne également les tableaux.;
#X obj 535 -204 receive bang_config;
#N canvas 0 50 1024 685 intensite 0;
#X obj 28 6 inlet;
#X obj 282 9 inlet;
#X obj 298 224 +;
#X obj 280 259 *;
#X obj 262 356 sqrt;
#X obj 176 342 /;
#X obj 244 398 *;
#X obj 244 435 outlet;
#X obj 316 173 f;
#X obj 262 332 / 1;
#X obj 359 171 f;
#X obj 264 166 f;
#X obj 377 5 receive dist_ref;
#X text 398 111 dmoy(x)=sqrt(y(psi)²+dref²);
#X obj 377 57 *;
#X obj 377 28 t f f;
#X obj 282 56 *;
#X obj 282 34 t f f;
#X obj 359 84 +;
#X obj 359 109 sqrt;
#X obj 28 30 t b f b f f b;
#X connect 0 0 20 0;
#X connect 1 0 17 0;
#X connect 2 0 3 1;
#X connect 3 0 9 1;
#X connect 4 0 6 1;
#X connect 5 0 6 0;
#X connect 6 0 7 0;
#X connect 8 0 2 1;
#X connect 9 0 4 0;
#X connect 10 0 9 0;
#X connect 11 0 5 0;
#X connect 12 0 15 0;
#X connect 14 0 18 1;
#X connect 15 0 14 0;
#X connect 15 1 14 1;
#X connect 16 0 18 0;
#X connect 17 0 16 0;
#X connect 17 1 16 1;
#X connect 17 1 11 1;
#X connect 18 0 19 0;
#X connect 19 0 10 1;
#X connect 19 0 8 1;
#X connect 20 0 11 0;
#X connect 20 1 5 1;
#X connect 20 2 10 0;
#X connect 20 3 3 0;
#X connect 20 4 2 0;
#X connect 20 5 8 0;
#X restore 325 344 pd intensite;
#N canvas 128 214 343 151 license 0;
#X text 17 58 Copyright 2016 Baptiste Maffrand;
#X text 19 28 SFO;
#X text 18 91 Ce programme est sous license GPLv3;
#X restore 8 -215 pd license;
#X text 573 379 fait la moyenne des gains puis envoie au process pour
obtenir gain constant;
#X obj 74 -106 inlet~;
#X connect 2 0 12 0;
#X connect 3 0 39 0;
#X connect 4 0 2 0;
#X connect 4 1 7 1;
#X connect 4 2 6 1;
#X connect 5 0 47 0;
#X connect 5 1 56 0;
#X connect 10 0 36 0;
#X connect 11 0 9 0;
#X connect 12 0 5 0;
#X connect 13 0 48 0;
#X connect 14 0 50 0;
#X connect 15 0 13 0;
#X connect 16 0 34 0;
#X connect 17 0 16 0;
#X connect 18 0 19 0;
#X connect 18 1 17 2;
#X connect 19 0 17 0;
#X connect 20 0 17 1;
#X connect 20 0 44 0;
#X connect 21 0 22 0;
#X connect 21 0 23 0;
#X connect 24 0 21 0;
#X connect 25 0 34 0;
#X connect 26 0 52 1;
#X connect 27 0 28 0;
#X connect 27 1 25 0;
#X connect 28 0 53 0;
#X connect 29 0 24 0;
#X connect 29 1 53 1;
#X connect 30 0 31 0;
#X connect 32 0 8 0;
#X connect 32 1 30 0;
#X connect 32 2 52 0;
#X connect 32 3 12 1;
#X connect 32 4 42 1;
#X connect 33 0 42 0;
#X connect 33 1 7 0;
#X connect 36 0 14 0;
#X connect 36 1 15 0;
#X connect 36 2 11 1;
#X connect 36 3 11 2;
#X connect 37 0 14 0;
#X connect 38 0 15 0;
#X connect 39 0 27 0;
#X connect 39 1 51 0;
#X connect 39 1 20 0;
#X connect 40 0 27 0;
#X connect 41 0 29 0;
#X connect 42 0 30 1;
#X connect 47 0 6 0;
#X connect 48 0 8 0;
#X connect 48 1 30 0;
#X connect 48 2 52 0;
#X connect 48 3 47 1;
#X connect 48 4 56 1;
#X connect 48 5 12 2;
#X connect 48 6 42 1;
#X connect 50 0 32 0;
#X connect 51 0 36 0;
#X connect 52 0 4 0;
#X connect 53 0 18 0;
#X connect 55 0 40 0;
#X connect 56 0 33 0;
#X connect 59 0 11 0;
#X coords 0 -1 1 1 220 180 1 70 -80;
